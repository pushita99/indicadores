import{_ as S,a as p,F as I,r,o as y,c as h,b as s,d as n,w as l,e as g,t as _,f as b,p as V,g as T}from"./index.d10435ed.js";const F={data(){return{companydirections:null,companydirectionDialog:!1,deleteCompanydirectionDialog:!1,deleteCompanydirectionsDialog:!1,companydirection:{},direction:{name:""},company:{name:""},selectedCompanydirections:null,filters:{},submitted:!1,directions:[],companies:[],autoFilteredCompanies:[],autoFilteredDirections:[]}},created(){this.initFilters()},async mounted(){await this.loadData()},methods:{formatCurrency(e){if(e)return e.toLocaleString("en-US",{style:"currency",currency:"USD"})},openNew(){this.companydirection={},this.submitted=!1,this.companydirectionDialog=!0},hideDialog(){this.companydirectionDialog=!1,this.submitted=!1},async saveCompanydirection(){if(this.submitted=!0,this.companydirection.id)this.companydirections[this.findIndexById(this.companydirection.id)]=this.companydirection,this.$toast.add({severity:"success",summary:"Successful",detail:"Empresa-direcci\xF3n modificado con \xE9xito",life:3e3});else try{await p.put("http://localhost:3000/company",{...this.company,direction:this.direction.id,company:this.company.id}),this.$toast.add({severity:"success",summary:"Successful",detail:"Empresa-direcci\xF3n insertada con \xE9xito",life:3e3}),this.loadData()}catch(e){this.$toast.add({severity:"error",summary:"Error",detail:e,life:3e3}),console.log(e)}finally{this.companydirectionDialog=!1,this.companydirection={}}},editCompanydirection(e){this.companydirection={...e},this.companydirectionDialog=!0},confirmDeleteCompanydirection(e){console.log("pase por ConfirmDeleteCompanydirection"),this.companydirection=e,this.deleteCompanydirectionDialog=!0},async deleteCompanydirection(){console.log("pase por deleteCompanydirection"),console.log(this.companydirection.id);const e=await p.delete("http://localhost:3000/companydirection/"+this.companydirection.id);console.log(e),this.deleteCompanydirectionDialog=!1,this.companydirection={},this.$toast.add({severity:"success",summary:"Operaci\xF3n exitosa",detail:"Empresa-direcci\xF3n eliminada",life:3e3})},findIndexById(e){let t=-1;for(let m=0;m<this.companydirections.length;m++)if(this.companydirections[m].id===e){t=m;break}return t},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){console.log("pase por confirmDeleteSelected"),this.deleteCompanydirectionsDialog=!0},async deleteSelectedCompanydirections(){console.log("pase por ConfirmDeleteCompanydirections"),await p.delete("http://localhost:3000/companydirection/",this.companydirections),this.deleteCompanydirectionsDialog=!1,this.selectedCompanydirections=null,this.$toast.add({severity:"success",summary:"Successful",detail:"Companies directions Deleted",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:I.CONTAINS}}},loadData(){p.get("http://localhost:3000/direction").then(e=>{this.directions=e.data}),p.get("http://localhost:3000/company").then(e=>{this.companies=e.data})},searchCompany(e){setTimeout(()=>{e.query.trim().length?this.autoFilteredCompanies=this.companies.filter(t=>t.name.toLowerCase().startsWith(e.query.toLowerCase())):this.autoFilteredCompanies=[...this.companies]},250)},searchDirections(e){setTimeout(()=>{e.query.trim().length?this.autoFilteredDirections=this.directions.filter(t=>t.name.toLowerCase().startsWith(e.query.toLowerCase())):this.autoFilteredDirections=[...this.directions]},250)}}},d=e=>(V("data-v-45042bd7"),e=e(),T(),e),N={class:"grid"},L={class:"col-12"},P={class:"card"},B={class:"my-2"},E={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},U=d(()=>s("h5",{class:"m-0"},"Empresa direcci\xF3n",-1)),q={class:"block mt-2 md:mt-0 p-input-icon-left"},M=d(()=>s("i",{class:"pi pi-search"},null,-1)),A=d(()=>s("span",{class:"p-column-title"},"Nombre",-1)),R=d(()=>s("span",{class:"p-column-title"},"Nombre",-1)),j={class:"field"},O=d(()=>s("label",{for:"directionId",class:"mb-3"},"Direcci\xF3n",-1)),z={class:"field"},W=d(()=>s("label",{for:"companyId",class:"mb-3"},"Empresa",-1)),G={class:"flex align-items-center justify-content-center"},K=d(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),H={key:0},J={class:"flex align-items-center justify-content-center"},Q=d(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),X={key:0};function Y(e,t,m,$,o,c){const D=r("Toast"),a=r("Button"),v=r("Toolbar"),x=r("InputText"),u=r("Column"),k=r("DataTable"),C=r("AutoComplete"),f=r("Dialog");return y(),h("div",N,[s("div",L,[s("div",P,[n(D),n(v,{class:"mb-4"},{start:l(()=>[s("div",B,[n(a,{label:"A\xF1adir",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:c.openNew},null,8,["onClick"]),n(a,{label:"Eliminar",icon:"pi pi-trash",class:"p-button-danger",onClick:c.confirmDeleteSelected,disabled:!o.selectedCompanydirections||!o.selectedCompanydirections.length},null,8,["onClick","disabled"])])]),_:1}),n(k,{ref:"dt",value:o.companydirections,selection:o.selectedCompanydirections,"onUpdate:selection":t[1]||(t[1]=i=>o.selectedCompanydirections=i),dataKey:"id",paginator:!0,rows:10,filters:o.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando {first} hasta {last} de {totalRecords} empresas",responsiveLayout:"scroll"},{header:l(()=>[s("div",E,[U,s("span",q,[M,n(x,{modelValue:o.filters.global.value,"onUpdate:modelValue":t[0]||(t[0]=i=>o.filters.global.value=i),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:l(()=>[n(u,{selectionMode:"multiple",headerStyle:"width: 3rem"}),n(u,{field:"name",header:"Empresa",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:l(i=>[A,g(" "+_(i.data.company.name),1)]),_:1}),n(u,{field:"name",header:"Direcci\xF3n",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:l(i=>[R,g(" "+_(i.data.direction.name),1)]),_:1}),n(u,{headerStyle:"min-width:10rem;"},{body:l(i=>[n(a,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:w=>c.editCompanydirection(i.data)},null,8,["onClick"]),n(a,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:w=>c.confirmDeleteCompanydirection(i.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),n(f,{visible:o.companydirectionDialog,"onUpdate:visible":t[6]||(t[6]=i=>o.companydirectionDialog=i),style:{width:"450px"},header:"Empresa direcci\xF3n",modal:!0,class:"p-fluid"},{footer:l(()=>[n(a,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:c.hideDialog},null,8,["onClick"]),n(a,{label:"Guardar",icon:"pi pi-check",class:"p-button-text",onClick:c.saveCompanydirection},null,8,["onClick"])]),default:l(()=>[s("div",j,[O,n(C,{placeholder:"Buscar direcci\xF3n",id:"directionId",dropdown:!0,modelValue:o.direction,"onUpdate:modelValue":t[2]||(t[2]=i=>o.direction=i),suggestions:o.autoFilteredDirections,onComplete:t[3]||(t[3]=i=>c.searchDirections(i)),"force-selection":!0,field:"name"},null,8,["modelValue","suggestions"])]),s("div",z,[W,n(C,{placeholder:"Buscar empresa",id:"companyId",dropdown:!0,modelValue:o.company,"onUpdate:modelValue":t[4]||(t[4]=i=>o.company=i),suggestions:o.autoFilteredCompanies,onComplete:t[5]||(t[5]=i=>c.searchCompany(i)),"force-selection":!0,field:"name"},null,8,["modelValue","suggestions"])])]),_:1},8,["visible"]),n(f,{visible:o.deleteCompanydirectionDialog,"onUpdate:visible":t[8]||(t[8]=i=>o.deleteCompanydirectionDialog=i),style:{width:"450px"},header:"Confirmar",modal:!0},{footer:l(()=>[n(a,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=i=>o.deleteCompanydirectionDialog=!1)}),n(a,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:c.deleteCompanydirection},null,8,["onClick"])]),default:l(()=>[s("div",G,[K,o.companydirection?(y(),h("span",H,"\xBFSeguro que desea eliminar este elemento?")):b("",!0)])]),_:1},8,["visible"]),n(f,{visible:o.deleteCompanydirectionsDialog,"onUpdate:visible":t[10]||(t[10]=i=>o.deleteCompanydirectionsDialog=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:l(()=>[n(a,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=i=>o.deleteCompanydirectionsDialog=!1)}),n(a,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:e.deleteSelectedCompanydirection},null,8,["onClick"])]),default:l(()=>[s("div",J,[Q,o.companydirection?(y(),h("span",X,"\xBFSeguro que desea eliminar las filas seleccionadas?")):b("",!0)])]),_:1},8,["visible"])])])])}const Z=S(F,[["render",Y],["__scopeId","data-v-45042bd7"]]),te={__name:"Companydirection",setup(e){return(t,m)=>(y(),h("main",null,[n(Z)]))}};export{te as default};
