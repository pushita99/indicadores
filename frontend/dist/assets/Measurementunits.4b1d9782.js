import{_ as S,a as c,F as w,r,o as f,c as h,b as a,d as s,w as l,e as b,t as v,n as N,f as y,B as U,p as T,g as P}from"./index.d10435ed.js";const p=U+"measurementunit/",V={data(){return{measurementunits:null,measurementunitDialog:!1,deleteMeasurementunitDialog:!1,deleteMeasurementunitsDialog:!1,measurementunit:{},selectedMeasurementunits:null,filters:{},submitted:!1}},created(){this.initFilters()},async mounted(){this.loadData()},methods:{formatCurrency(t){if(t)return t.toLocaleString("en-US",{style:"currency",currency:"USD"})},openNew(){this.measurementunit={},this.submitted=!1,this.measurementunitDialog=!0},hideDialog(){this.measurementunitDialog=!1,this.submitted=!1},async saveMeasurementunit(){if(this.submitted=!0,this.measurementunit.name.trim())if(this.measurementunit.id){this.measurementunit;try{await c.patch(p+this.measurementunit.id,{...this.measurementunit}),this.$toast.add({severity:"success",summary:"Successful",detail:"Tipo de unidad de medida modificada con \xE9xito",life:3e3}),this.loadData()}catch(t){this.$toast.add({severity:"error",summary:"Error",detail:t,life:3e3}),console.log(t)}finally{this.measurementunitDialog=!1,this.measurementunit={}}}else try{await c.post(p,this.measurementunit),this.$toast.add({severity:"success",summary:"Successful",detail:"Unidad de medida insertada con \xE9xito",life:3e3}),this.loadData()}catch(t){this.$toast.add({severity:"error",summary:"Error",detail:t,life:3e3}),console.log(t)}finally{this.measurementunitDialog=!1,this.measurementunit={}}},editMeasurementunit(t){this.measurementunit={...t},this.measurementunitDialog=!0},confirmDeleteMeasurementunit(t){console.log("pase por ConfirmDeleteMeasurementunit"),this.measurementunit=t,this.deleteMeasurementunitDialog=!0},async deleteMeasurementunit(){console.log("pase por deleteMeasurementunit"),console.log(this.measurementunit.id);const t=await c.delete(p+this.measurementunit.id);console.log(t),this.loadData(),this.deleteMeasurementunitDialog=!1,this.measurementunit={},this.$toast.add({severity:"success",summary:"Operaci\xF3n exitosa",detail:"Unidad de medida eliminada",life:3e3})},findIndexById(t){let i=-1;for(let m=0;m<this.measurementunits.length;m++)if(this.measurementunits[m].id===t){i=m;break}return i},exportCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){console.log("pase por confirmDeleteSelected"),this.deleteMeasurementunitsDialog=!0},async deleteSelectedMeasurementunits(){console.log("pase por ConfirmDeleteMeasurementunits"),await c.delete(p,this.measurementunits),this.deleteMeasurementunitsDialog=!1,this.loadData(),this.selectedMeasurementunits=null,this.$toast.add({severity:"success",summary:"Successful",detail:"Unidades de medida eliminadas",life:3e3})},initFilters(){this.filters={global:{value:null,matchMode:w.CONTAINS}}},loadData(){c.get(p).then(t=>{this.measurementunits=t.data})}}},d=t=>(T("data-v-2ff46ef0"),t=t(),P(),t),L={class:"grid"},I={class:"col-12"},B={class:"card"},R={class:"my-2"},E={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},F=d(()=>a("h5",{class:"m-0"},"Listado de unidades de medida",-1)),q={class:"block mt-2 md:mt-0 p-input-icon-left"},A=d(()=>a("i",{class:"pi pi-search"},null,-1)),j=d(()=>a("span",{class:"p-column-title"},"Nombre",-1)),z={class:"field"},O=d(()=>a("label",{for:"name"},"Nombre",-1)),G={key:0,class:"p-invalid"},K={class:"flex align-items-center justify-content-center"},H=d(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),J={key:0},Q={class:"flex align-items-center justify-content-center"},W=d(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),X={key:0};function Y(t,i,m,$,e,u){const M=r("Toast"),o=r("Button"),C=r("Toolbar"),D=r("InputText"),_=r("Column"),x=r("DataTable"),g=r("Dialog");return f(),h("div",L,[a("div",I,[a("div",B,[s(M),s(C,{class:"mb-4"},{start:l(()=>[a("div",R,[s(o,{label:"A\xF1adir",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:u.openNew},null,8,["onClick"]),s(o,{label:"Eliminar",icon:"pi pi-trash",class:"p-button-danger",onClick:u.confirmDeleteSelected,disabled:!e.selectedMeasurementunits||!e.selectedMeasurementunits.length},null,8,["onClick","disabled"])])]),_:1}),s(x,{ref:"dt",value:e.measurementunits,selection:e.selectedMeasurementunits,"onUpdate:selection":i[1]||(i[1]=n=>e.selectedMeasurementunits=n),dataKey:"id",paginator:!0,rows:10,filters:e.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando {first} hasta {last} de {totalRecords} unidades de medida",responsiveLayout:"scroll"},{header:l(()=>[a("div",E,[F,a("span",q,[A,s(D,{modelValue:e.filters.global.value,"onUpdate:modelValue":i[0]||(i[0]=n=>e.filters.global.value=n),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:l(()=>[s(_,{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(_,{field:"name",header:"Nombre",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:l(n=>[j,b(" "+v(n.data.name),1)]),_:1}),s(_,{headerStyle:"min-width:10rem;"},{body:l(n=>[s(o,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:k=>u.editMeasurementunit(n.data)},null,8,["onClick"]),s(o,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:k=>u.confirmDeleteMeasurementunit(n.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),s(g,{visible:e.measurementunitDialog,"onUpdate:visible":i[3]||(i[3]=n=>e.measurementunitDialog=n),style:{width:"450px"},header:"Detalles Unidad de medida",modal:!0,class:"p-fluid"},{footer:l(()=>[s(o,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:u.hideDialog},null,8,["onClick"]),s(o,{label:"Guardar",icon:"pi pi-check",class:"p-button-text",onClick:u.saveMeasurementunit},null,8,["onClick"])]),default:l(()=>[a("div",z,[O,s(D,{id:"name",modelValue:e.measurementunit.name,"onUpdate:modelValue":i[2]||(i[2]=n=>e.measurementunit.name=n),modelModifiers:{trim:!0},required:"true",autofocus:"",class:N({"p-invalid":e.submitted&&!e.measurementunit.name})},null,8,["modelValue","class"]),e.submitted&&!e.measurementunit.name?(f(),h("small",G,"Nombre es requerido.")):y("",!0)])]),_:1},8,["visible"]),s(g,{visible:e.deleteMeasurementunitDialog,"onUpdate:visible":i[5]||(i[5]=n=>e.deleteMeasurementunitDialog=n),style:{width:"450px"},header:"Confirmar",modal:!0},{footer:l(()=>[s(o,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:i[4]||(i[4]=n=>e.deleteMeasurementunitDialog=!1)}),s(o,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:u.deleteMeasurementunit},null,8,["onClick"])]),default:l(()=>[a("div",K,[H,e.measurementunit?(f(),h("span",J,[b("\xBFSeguro que desea eliminar "),a("b",null,v(e.measurementunit.name),1),b("?")])):y("",!0)])]),_:1},8,["visible"]),s(g,{visible:e.deleteMeasurementunitsDialog,"onUpdate:visible":i[7]||(i[7]=n=>e.deleteMeasurementunitsDialog=n),style:{width:"450px"},header:"Confirm",modal:!0},{footer:l(()=>[s(o,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:i[6]||(i[6]=n=>e.deleteMeasurementunitsDialog=!1)}),s(o,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:u.deleteSelectedMeasurementunits},null,8,["onClick"])]),default:l(()=>[a("div",Q,[W,e.measurementunit?(f(),h("span",X,"\xBFSeguro que desea eliminar las unidades de medida seleccionadas?")):y("",!0)])]),_:1},8,["visible"])])])])}const Z=S(V,[["render",Y],["__scopeId","data-v-2ff46ef0"]]),te={__name:"Measurementunits",setup(t){return(i,m)=>(f(),h("main",null,[s(Z)]))}};export{te as default};
